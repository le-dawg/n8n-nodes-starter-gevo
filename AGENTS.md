# Repository Guidelines

## Project Structure & Module Organization
- `nodes/AzureCohereRerank/AzureCohereRerank.node.ts` holds the TypeScript source for the community node entrypoint.
- `credentials/AzureCohereRerankApi.credentials.ts` defines the custom credential shared with the node.
- `tests/AzureCohereRerank.node.test.ts` contains Jest coverage for rerank request/response behavior.
- `dist/` stores compiled artifacts generated by build scripts; do not edit by hand.
- `icons/` hosts node artwork, while root config files (`eslint.config.mjs`, `jest.config.cjs`, `tsconfig.json`) centralize tooling settings.

## Build, Test, and Development Commands
- `npm run dev` launches the n8n node CLI in watch mode to live-reload a linked n8n instance.
- `npm run build` compiles TypeScript into `dist/` via the n8n CLI and should run before publishing.
- `npm run build:watch` triggers `tsc --watch` for rapid local iteration without packaging overhead.
- `npm run lint` / `npm run lint:fix` enforce the shared ESLint + Prettier ruleset.
- `npm test` executes the Jest suite; append `--watch` for continuous runs during development.

## Coding Style & Naming Conventions
- Use TypeScript with Prettier 3 defaults (2-space indent, single quotes, trailing commas where valid).
- Export node or credential classes in PascalCase (`AzureCohereRerank`), while helpers stay camelCase.
- Follow filename suffixes: `*.node.ts`, `*.credentials.ts`, and matching `*.test.ts`.
- Prefer `async/await` and surface runtime issues with `NodeOperationError` to match n8n patterns.

## Testing Guidelines
- Add tests under `tests/`, mirroring source filenames (e.g., `AzureCohereRerank.node.test.ts`).
- Mock external HTTP calls with Jest utilities instead of reaching Azure endpoints; reuse existing mocks.
- Cover both rerank success and failure paths; run `npm test -- --coverage` on significant logic changes.
- Ensure serialized documents retain metadata ordering in assertions.

## Commit & Pull Request Guidelines
- Follow conventional commit prefixes seen in history (`feat`, `fix`, `chore`) and keep scopes focused.
- Explain user-visible impact, test results, and related issues in PR descriptions.
- Include screenshots or JSON payload snippets when UI payloads or credential fields change.
- Re-run `npm run build` and `npm test` before requesting review to validate generated `dist/`.

## Security & Configuration Tips
- Never commit live Azure keys; rely on n8n credential storage or local `.env` files during development.
- Verify that `dist/credentials/...` only emits sanitized fields prior to `npm run release`.
- Point test runs at sandbox Azure deployments and note temporary endpoints in PR notes.
